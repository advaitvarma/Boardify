<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - AstraScore</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = { 
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'float-delayed': 'float 6s ease-in-out 3s infinite',
                        'fade-in-up': 'fadeInUp 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards', 
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        },
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(15px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Outfit', sans-serif;
            background-color: #f8fafc;
            overflow-x: hidden;
        }

        /* Animated Background */
        .blob {
            position: fixed;
            filter: blur(90px);
            z-index: -1;
            animation: float 10s ease-in-out infinite;
            pointer-events: none; /* CRITICAL FIX: Ensures background doesn't block clicks */
        }
        
        .blob-1 { 
            top: -10%; left: -10%; width: 500px; height: 500px; 
            background: #c084fc; 
            opacity: 0.2; 
            animation-delay: 0s; 
        }
        .blob-2 { 
            bottom: -10%; right: -10%; width: 500px; height: 500px; 
            background: #60a5fa; 
            opacity: 0.2; 
            animation-delay: -5s; 
        }
        .blob-3 { 
            top: 40%; left: 40%; width: 300px; height: 300px; 
            background: #f472b6; 
            opacity: 0.15; 
            animation-delay: -2s; 
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        .dark ::-webkit-scrollbar-thumb { background: #475569; }

        /* Glass Cards */
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 1);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
        }
        .dark .glass-card {
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: none;
        }

        /* Card Hover Effects */
        .event-card {
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
        }
        .event-card:hover {
            transform: translateY(-4px) scale(1.005);
            box-shadow: 0 15px 30px -5px rgba(0, 0, 0, 0.08);
        }
        .event-card:hover .card-icon {
            transform: scale(1.1) rotate(5deg);
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 dark:bg-slate-900 dark:text-white transition-colors duration-300 min-h-screen relative">

    <!-- Background Blobs -->
    <div class="blob blob-1 rounded-full mix-blend-multiply dark:mix-blend-screen"></div>
    <div class="blob blob-2 rounded-full mix-blend-multiply dark:mix-blend-screen"></div>
    <div class="blob blob-3 rounded-full mix-blend-multiply dark:mix-blend-screen"></div>

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 glass-card border-b shadow-sm">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="group flex items-center gap-2 text-2xl font-black tracking-tight">
                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-600 to-indigo-600 flex items-center justify-center text-white shadow-lg group-hover:scale-110 transition-transform duration-200">
                    <i class="fas fa-star text-sm"></i>
                </div>
                <span class="bg-clip-text text-transparent bg-gradient-to-r from-blue-700 to-indigo-700 dark:from-blue-400 dark:to-indigo-400">
                    AstraScore
                </span>
            </a>
            
            <div class="flex items-center gap-4">
                <a href="create.html" class="hidden md:flex items-center gap-2 bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-700 hover:to-blue-700 text-white px-5 py-2.5 rounded-xl font-bold text-sm transition-all shadow-lg shadow-blue-500/30 hover:shadow-blue-500/50 hover:-translate-y-0.5">
                    <i class="fas fa-plus"></i>
                    <span>New Event</span>
                </a>
                
                <button id="theme-toggle" class="w-10 h-10 rounded-xl glass-card flex items-center justify-center text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-800 transition-all shadow-sm hover:shadow-md border border-slate-200 dark:border-slate-700">
                    <i class="fas"></i>
                </button>
            </div>
        </div>
    </nav>

    <main class="container mx-auto px-4 md:px-6 py-8">
        
        <!-- Header Section -->
        <div class="flex flex-col md:flex-row justify-between items-end mb-8 gap-4 animate-fade-in-up">
            <div>
                <h1 class="text-4xl font-black tracking-tight mb-2 text-slate-800 dark:text-white">Dashboard</h1>
                <p class="text-slate-500 dark:text-slate-400 font-medium">Welcome back! Here's what's happening today.</p>
            </div>
        </div>

        <!-- Stats Overview -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-10">
            <!-- Stats items populated by JS -->
        </div>

        <!-- Filters & Search -->
        <div class="glass-card p-2 rounded-2xl flex flex-col md:flex-row gap-2 mb-8 shadow-sm animate-fade-in-up" style="animation-delay: 0.05s;">
            <div class="relative flex-grow group">
                <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-500 transition-colors"></i>
                <input type="text" id="search-input" placeholder="Search events, teams, or leagues..." 
                    class="w-full pl-11 pr-4 py-3 rounded-xl bg-transparent border border-transparent focus:bg-white dark:focus:bg-slate-800 focus:border-blue-500/50 focus:ring-4 focus:ring-blue-500/10 outline-none transition-all text-slate-700 dark:text-white placeholder-slate-400">
            </div>
            <div class="flex gap-2 overflow-x-auto pb-2 md:pb-0 no-scrollbar" id="category-pills">
                <!-- Pills populated by JS -->
            </div>
        </div>

        <!-- Events Grid -->
        <div id="events-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Events populated by JS -->
        </div>

        <!-- Empty State (Hidden by default) -->
        <div id="empty-state" class="hidden flex-col items-center justify-center py-20 text-center animate-fade-in-up">
            <div class="w-24 h-24 bg-white dark:bg-slate-800 rounded-full flex items-center justify-center mb-4 text-4xl text-slate-300 dark:text-slate-600 shadow-sm">
                <i class="fas fa-search"></i>
            </div>
            <h3 class="text-xl font-bold text-slate-700 dark:text-slate-200 mb-2">No events found</h3>
            <p class="text-slate-500 dark:text-slate-400 max-w-xs mx-auto">We couldn't find any matches matching your criteria. Try adjusting your filters.</p>
            <button onclick="resetFilters()" class="mt-6 text-blue-600 dark:text-blue-400 font-bold hover:underline">Clear all filters</button>
        </div>

    </main>

    <!-- Floating Action Button (Mobile) -->
    <a href="create.html" class="md:hidden fixed bottom-6 right-6 w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg shadow-blue-600/40 flex items-center justify-center text-2xl z-40 hover:scale-110 transition-transform">
        <i class="fas fa-plus"></i>
    </a>

    <script>
        // --- DATA (Updated with Fixed Hyperlinks) ---
        const events = [
            {
                id: 'demo-football',
                title: "Inter-High Football Final",
                category: "sports",
                subCategory: "Football",
                type: "Inter-school",
                status: "live",
                color: "orange",
                viewLink: "board.html?id=demo-football",
                adminLink: "admin.html?id=demo-football"
            },
            {
                id: 'demo-quiz',
                title: "Science Wizard 2025",
                category: "academic",
                subCategory: "Quiz",
                type: "City",
                status: "upcoming",
                color: "blue",
                viewLink: "board.html?id=demo-quiz",
                adminLink: "admin.html?id=demo-quiz"
            },
            {
                id: 3,
                title: "nnn",
                category: "sports",
                subCategory: "Football",
                type: "City League",
                status: "upcoming",
                color: "orange",
                viewLink: "match.html?id=3",
                adminLink: "admin.html?id=3"
            }
        ];

        // --- STYLE MAPPINGS ---
        const styles = {
            orange: {
                bg: "bg-orange-100 dark:bg-orange-900/30",
                text: "text-orange-700 dark:text-orange-400",
                border: "bg-orange-500",
                badge: "bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400"
            },
            blue: {
                bg: "bg-blue-100 dark:bg-blue-900/30",
                text: "text-blue-700 dark:text-blue-400",
                border: "bg-blue-500",
                badge: "bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"
            },
            emerald: {
                bg: "bg-emerald-100 dark:bg-emerald-900/30",
                text: "text-emerald-700 dark:text-emerald-400",
                border: "bg-emerald-500",
                badge: "bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400"
            },
            purple: {
                bg: "bg-purple-100 dark:bg-purple-900/30",
                text: "text-purple-700 dark:text-purple-400",
                border: "bg-purple-500",
                badge: "bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400"
            },
            rose: {
                bg: "bg-rose-100 dark:bg-rose-900/30",
                text: "text-rose-700 dark:text-rose-400",
                border: "bg-rose-500",
                badge: "bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400"
            },
            red: {
                bg: "bg-red-100 dark:bg-red-900/30",
                text: "text-red-700 dark:text-red-400",
                border: "bg-red-500",
                badge: "bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"
            },
            slate: {
                bg: "bg-slate-100 dark:bg-slate-800",
                text: "text-slate-700 dark:text-slate-400",
                border: "bg-slate-500",
                badge: "bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-400"
            }
        };

        // --- ICONS MAPPING ---
        const categoryIcons = {
            'sports': 'fa-trophy',
            'academic': 'fa-graduation-cap',
            'cultural': 'fa-theater-masks',
            'esports': 'fa-gamepad',
            'other': 'fa-star'
        };

        const subCategoryIcons = {
            'Football': 'fa-futbol',
            'Basketball': 'fa-basketball',
            'Quiz': 'fa-brain',
            'Debate': 'fa-microphone',
            'Esports': 'fa-headset'
        };

        // --- STATE ---
        let currentFilter = 'all';
        let searchQuery = '';

        // --- DOM ELEMENTS ---
        const grid = document.getElementById('events-grid');
        const emptyState = document.getElementById('empty-state');
        const searchInput = document.getElementById('search-input');
        const categoryPillsContainer = document.getElementById('category-pills');
        const statsContainer = document.querySelector('.grid.grid-cols-2');

        // --- RENDER FUNCTIONS ---

        function renderStats() {
            const total = events.length;
            const live = events.filter(e => e.status === 'live').length;
            const upcoming = events.filter(e => e.status === 'upcoming').length;
            const completed = events.filter(e => e.status === 'completed').length;

            const stats = [
                { label: 'Total Events', value: total, icon: 'fa-layer-group', colorKey: 'blue' },
                { label: 'Live Now', value: live, icon: 'fa-bolt', colorKey: 'red' },
                { label: 'Upcoming', value: upcoming, icon: 'fa-calendar', colorKey: 'orange' },
                { label: 'Completed', value: completed, icon: 'fa-check-circle', colorKey: 'emerald' },
            ];

            statsContainer.innerHTML = stats.map((stat, index) => {
                const colorStyle = styles[stat.colorKey];
                return `
                <div class="glass-card p-4 rounded-2xl flex items-center gap-4 animate-fade-in-up" style="animation-delay: ${index * 0.05}s">
                    <div class="w-12 h-12 rounded-xl ${colorStyle.bg} ${colorStyle.text} flex items-center justify-center text-xl shadow-sm">
                        <i class="fas ${stat.icon}"></i>
                    </div>
                    <div>
                        <p class="text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider">${stat.label}</p>
                        <p class="text-2xl font-black text-slate-800 dark:text-white">${stat.value}</p>
                    </div>
                </div>
            `}).join('');
        }

        function renderFilters() {
            const categories = ['all', 'sports', 'academic', 'cultural', 'esports'];
            
            categoryPillsContainer.innerHTML = categories.map(cat => `
                <button onclick="setFilter('${cat}')" 
                    class="px-5 py-2.5 rounded-xl text-sm font-bold transition-all whitespace-nowrap 
                    ${currentFilter === cat 
                        ? 'bg-blue-600 text-white shadow-lg shadow-blue-500/30 scale-105' 
                        : 'bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700 shadow-sm border border-slate-100 dark:border-slate-700'}">
                    ${cat.charAt(0).toUpperCase() + cat.slice(1)}
                </button>
            `).join('');
        }

        function renderEvents() {
            grid.innerHTML = '';
            
            const filtered = events.filter(event => {
                const matchesSearch = event.title.toLowerCase().includes(searchQuery.toLowerCase()) || 
                                      event.subCategory.toLowerCase().includes(searchQuery.toLowerCase());
                const matchesFilter = currentFilter === 'all' || event.category === currentFilter;
                return matchesSearch && matchesFilter;
            });

            if (filtered.length === 0) {
                grid.classList.add('hidden');
                emptyState.classList.remove('hidden');
                emptyState.classList.add('flex');
            } else {
                grid.classList.remove('hidden');
                emptyState.classList.add('hidden');
                emptyState.classList.remove('flex');

                filtered.forEach((event, index) => {
                    const icon = subCategoryIcons[event.subCategory] || categoryIcons[event.category] || 'fa-star';
                    const colorStyle = styles[event.color]; // Get full class strings

                    // Status Badge Logic
                    let statusBadge = '';
                    if(event.status === 'live') statusBadge = `<span class="flex items-center gap-1.5 bg-red-100 text-red-700 dark:bg-red-500/20 dark:text-red-400 text-xs font-bold px-2.5 py-1 rounded-full uppercase tracking-wide border border-red-200 dark:border-transparent"><span class="w-2 h-2 rounded-full bg-red-600 animate-pulse"></span>Live</span>`;
                    else if(event.status === 'upcoming') statusBadge = `<span class="bg-blue-100 text-blue-700 dark:bg-blue-500/20 dark:text-blue-400 text-xs font-bold px-2.5 py-1 rounded-full uppercase tracking-wide border border-blue-200 dark:border-transparent">Upcoming</span>`;
                    else statusBadge = `<span class="bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400 text-xs font-bold px-2.5 py-1 rounded-full uppercase tracking-wide border border-slate-200 dark:border-transparent">Ended</span>`;

                    const card = document.createElement('div');
                    card.className = `glass-card event-card p-6 rounded-2xl relative overflow-hidden animate-fade-in-up flex flex-col`;
                    // Faster stagger delay (0.05s) for snappy feel
                    card.style.animationDelay = `${index * 0.05}s`;
                    
                    card.innerHTML = `
                        <div class="absolute left-0 top-0 bottom-0 w-1.5 ${colorStyle.border}"></div>
                        
                        <div class="flex justify-between items-start mb-4 pl-3">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-xl ${colorStyle.bg} ${colorStyle.text} flex items-center justify-center card-icon transition-transform duration-300 shadow-sm">
                                    <i class="fas ${icon} text-sm"></i>
                                </div>
                                <span class="text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider">${event.subCategory}</span>
                            </div>
                            ${statusBadge}
                        </div>

                        <div class="pl-3 mb-6 flex-grow">
                            <h3 class="text-xl font-bold text-slate-800 dark:text-white leading-tight mb-1 group-hover:text-blue-600 transition-colors">${event.title}</h3>
                            <p class="text-sm font-medium text-slate-500 dark:text-slate-400">${event.type}</p>
                        </div>

                        <div class="pl-3 grid grid-cols-2 gap-3 mt-auto">
                            <a href="${event.adminLink}" class="relative z-10 flex items-center justify-center gap-2 bg-slate-900 dark:bg-white text-white dark:text-slate-900 py-2.5 rounded-xl font-bold text-sm shadow-lg shadow-slate-900/20 dark:shadow-white/10 hover:-translate-y-0.5 hover:shadow-xl transition-all">
                                <i class="fas fa-cog"></i> Admin
                            </a>
                            <a href="${event.viewLink}" class="relative z-10 flex items-center justify-center gap-2 bg-slate-100 dark:bg-slate-700/50 text-slate-600 dark:text-slate-300 py-2.5 rounded-xl font-bold text-sm hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors border border-slate-200 dark:border-transparent">
                                <i class="fas fa-eye"></i> View
                            </a>
                        </div>
                    `;
                    grid.appendChild(card);
                });
            }
        }

        // --- EVENT HANDLERS ---

        function setFilter(category) {
            currentFilter = category;
            renderFilters();
            renderEvents();
        }

        function resetFilters() {
            searchQuery = '';
            currentFilter = 'all';
            searchInput.value = '';
            renderFilters();
            renderEvents();
        }

        searchInput.addEventListener('input', (e) => {
            searchQuery = e.target.value;
            renderEvents();
        });

        // --- INIT & THEME ---
        
        (function() {
            const themeBtn = document.getElementById('theme-toggle');
            const html = document.documentElement;
            const icon = themeBtn.querySelector('i');

            function updateThemeUI() {
                if (html.classList.contains('dark')) {
                    // Moon icon for Dark Mode
                    icon.className = 'fas fa-moon text-blue-300';
                } else {
                    // Sun icon for Light Mode (styled to look like a sun, not a gear)
                    icon.className = 'fas fa-sun text-yellow-500 text-lg';
                }
            }

            // Initialize Theme - DEFAULT TO LIGHT unless explicitly set to Dark
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                html.classList.add('dark');
            } else {
                html.classList.remove('dark');
            }
            updateThemeUI();

            // Toggle theme
            themeBtn.addEventListener('click', () => {
                html.classList.toggle('dark');
                const isDark = html.classList.contains('dark');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                updateThemeUI();
            });

            // Initial Render
            renderStats();
            renderFilters();
            renderEvents();
        })();

    </script>
</body>
</html>